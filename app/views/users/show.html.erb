<p>
  <b>Name:</b>
  <%=h @user.name %>
</p>

<% if @user.blog %>
  <%= link_to user_blog_path(@user) %>
  
<% form_for([@user, @user.blog, Post.new]) do |f| %>
  <%= f.error_messages %>

  <p>
    <%= f.label :body %><br />
    <%= f.text_area :body %>
  </p>
  <p>
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </p>
  <p>
    <%= f.submit "Update" %>
  </p>
<% end %>

<% else %>
  <% form_for(:blog, :url => user_blog_path(@user)) do |f| %>
    <%= f.error_messages %>

    <p>
      <%= f.label :name %><br />
      <%= f.text_field :name %>
    </p>
    <p>
      <%= f.submit "Update" %>
    </p>
  <% end %>
  <%= link_to "new blog", new_user_blog_path(@user) %><br/>
  <%= link_to "new blog", new_user_blog_path(@user, @user.build_blog) %><br/>
  <%= link_to "new blog", new_user_blog_path(@user, Blog.new) %><br/>
<% end %>
  
<%= link_to 'Edit', edit_user_path(@user) %> |
<%= link_to 'Back', users_path %>
